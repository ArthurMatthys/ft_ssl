before_script:
    - rm -rf $HOME/.brew && git clone --depth=1 https://github.com/Homebrew/brew $HOME/.brew && echo 'export PATH=$HOME/.brew/bin:$PATH' >> $HOME/.zshrc && source $HOME/.zshrc && brew update
    - brew install python3 
    - python3 -V

stages:
    - build
    - test

build:
    stage: build
    tags:
        - osx
    script:
        - make

test:
    stage: test
    tags:
        - osx
        - python3
    script:
        - python3 run_test.py
    coverage: /TOTAL\s+\d+\s+\d+\s+(\d+)%$/
